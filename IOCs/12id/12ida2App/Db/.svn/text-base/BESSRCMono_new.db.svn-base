#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBDEND


record(calcout, "$(P)EnCalc") {
  field(INPA, "$(P)$(MTH).RBV CP MS")
  field(CALC, "B/C/D/SIN(A*D2R)")
  field(EGU, "KeV")
  field(PREC, "5")
  field(INPB, "$(P)E2P.C CP NMS")
  field(INPC, "2")
  field(INPD, "$(P)LatticeD.VAL CP NMS")
}

record(calcout, "$(P)LambdaCalc") {
  field(INPA, "$(P)$(MTH).RBV CP MS")
  field(CALC, "C*D*SIN(A*D2R)")
  field(EGU, "A")
  field(PREC, "5")
  field(INPC, "2")
  field(INPD, "$(P)LatticeD.VAL CP NMS")
}

record(calcout, "$(P)SlideCalc") {
  field(INPA, "$(P)$(MTH).RBV CP MS")
  field(CALC, "B/TAN(D*A*D2R)")
  field(EGU, "mm")
  field(PREC, "5")
  field(INPB, "$(P)Offset.VAL CP NMS")
  field(INPD, "2")
}


record(transform, "$(P)E2P") {
  field(DESC, "En to Positions")
  field(CLCA, "C/B")
  field(CLCB, "C/A")
  field(INPC, "12.3984")
  field(INPD, "2")
  field(INPE, "$(P)LatticeD.VAL CP NMS")
  field(INPF, "$(P)Offset.VAL CP NMS")
  field(CLCG, "ASIN(C/(A*E*D))*R2D")
  field(CLCH, "F/TAN(D*G*D2R)")
  field(PREC, "5")
  field(PINI, "YES")
}

record(mbbo, "$(P)LatticeTypeMO") {
  field(DESC, "Mono Crystal Type")
  field(DTYP, "Raw Soft Channel")
  field(FLNK, "$(P)LatticeTypeSeq.PROC PP MS")
  field(ZRVL, "0x1")
  field(ONVL, "0x2")
  field(TWVL, "0x3")
  field(THVL, "0x4")
  field(ZRST, "Si 111")
  field(ONST, "Diamond")
  field(TWST, "User 1")
  field(THST, "User 2")
}

record(seq, "$(P)LatticeTypeSeq") {
  field(DESC, "Lattice parameter holders")
  field(SELM, "Specified")
  field(SELL, "$(P)LatticeTypeMO.RVAL NPP NMS")
  field(PREC, "7")
  field(DOL1, "3.1356")
  field(LNK1, "$(P)LatticeD.VAL PP MS")
  field(DOL2, "2.05934")
  field(LNK2, "$(P)LatticeD.VAL PP MS")
  field(DOL3, "3.1356")
  field(LNK3, "$(P)LatticeD.VAL PP MS")
  field(DOL4, "3.1356")
  field(LNK4, "$(P)LatticeD.VAL PP MS")
}

record(ao, "$(P)LatticeD") {
  field(DESC, "Mono Lattice constatnt")
  field(PINI, "YES")
  field(DOL, "3.1356")
  field(PREC, "5")
  field(EGUF, "20")
  field(EGUL, "0.1")
  field(EGU, "Angstroms")
  field(DRVH, "20")
  field(DRVL, "0.1")
  field(HOPR, "20")
  field(LOPR, "0.1")
}

record(ai, "$(P)Offset") {
  field(DTYP, "Soft Channel")
  field(VAL, "20")
  field(PREC, "3")
  field(EGU, "mm")
  field(HOPR, "100")
  field(LOPR, "1.")
}

record(bo, "$(P)Mono_Mode") {
  field(ZNAM, "Freeze Slide")
  field(ONAM, "Center Slide ")
}

record(calcout, "$(P)slide_driveValue") {
  field(DISV, "0")
  field(SDIS, "$(P)Mono_Mode.VAL NPP NMS")
  field(CALC, "A")
  field(OUT, "$(P)$(MSLD).VAL PP MS")
  field(PREC,"6")
}

record(bo, "$(P)Mono_UseMode") {
  field(OUT, "$(P)Mono_UseModeFanout.VAL PP MS")
  field(ZNAM, "Use")
  field(ONAM, "Calibrate")
}

record(dfanout, "$(P)Mono_UseModeFanout") {
  field(OUTA, "$(P)$(MTH).SET NPP NMS")
  field(OUTB, "$(P)$(MSLD).SET NPP NMS")
}

record(transform, "$(P)E2P_LM") {
  field(CLCI, "2*A*SIN((E>0?E:0.001)*D2R)")
  field(CLCJ, "2*A*SIN(ATAN(B/(F>0?F:0.001))/2)")
  field(CLCK, "D?MAX(I,J):I")
  field(CLCL, "C/K")
  field(CLCM, "2*A*SIN((G>0?G:0.001)*D2R)")
  field(CLCN, "2*A*SIN(ATAN(B/(H>0?H:0.001))/2)")
  field(CLCO, "D?MIN(M,N):M")
  field(CLCP, "C/O")
  field(INPA, "$(P)LatticeD.VAL CP NMS")
  field(INPB, "$(P)Offset.VAL CP NMS")
  field(INPC, "$(P)E2P.C CP NMS")
  field(INPD, "$(P)Mono_Mode CP NMS")
  field(INPE, "$(P)$(MTH).LLM CP NMS")
  field(INPF, "$(P)$(MSLD).HLM  CP NMS")
  field(INPG, "$(P)$(MTH).HLM   CP NMS")
  field(INPH, "$(P)$(MSLD).LLM    CP NMS")
  field(PREC,"6")
}


record(transform, "$(P)E2P_driveT1") {
  field(DESC, "En to Positions")
  field(CLCA, "C/B")
  field(CLCB, "C/A")
  field(INPC, "$(P)E2P.C NPP NMS")
  field(INPE, "$(P)LatticeD.VAL NPP NMS")
  field(INPF, "$(P)Offset.VAL NPP NMS")
  field(CLCG, "ASIN(C/(A*E*2))*R2D")
  field(CLCH, "F/TAN(2*G*D2R)")
  field(PREC, "5")
  field(OUTG, "$(P)$(MTH).VAL PP MS")
  field(OUTH, "$(P)slide_driveValue.A PP MS")
  field(PREC,"6")
}


record(transform, "$(P)E2P_driveValue") {
  field(CLCA, "C/B")
  field(CLCB, "C/A")
  field(CLCF, "MAX(E,MIN(A,D))")
  field(CLCG, "C/F")
  field(CLCH, "F")
  field(INPC, "$(P)E2P.C NPP NMS")
  field(INPD, "$(P)E2P_LM.L NPP NMS")
  field(INPE, "$(P)E2P_LM.P NPP NMS")
  field(OUTF, "$(P)E2P_driveValue.A NPP NMS")
  field(OUTG, "$(P)E2P_driveValue.B NPP NMS")
  field(OUTH, "$(P)E2P_driveT1.A PP MS")
  field(PREC,"6")
}

record(transform, "$(P)enTwk") {
  field(CLCE, "a?d+(c?c:f):b?d-(c?c:f):d")
  field(INPD, "$(P)E2P_driveValue.A NPP NMS")
  field(OUTE, "$(P)E2P_driveValue.A PP MS")
  field(OUTG, "$(P)enTwk.A PP MS")
  field(OUTH, "$(P)enTwk.B P PMS")
  field(EGU, "Kev")
  field(PREC, "6")
  field(C, "0.01")
  field(F, "0.0001")
}

record(transform, "$(P)lambdaTwk") {
  field(CLCE, "a?d+(c?c:f):b?d-(c?c:f):d")
  field(INPD, "$(P)E2P_driveValue.B NPP NMS")
  field(OUTE, "$(P)E2P_driveValue.B PP MS")
  field(OUTG, "$(P)lambdaTwk.A PP MS")
  field(OUTH, "$(P)lambdaTwk.B P PMS")
  field(EGU, "A")
  field(PREC, "5")
  field(C, "0.001")
  field(F, "0.0001")
}

record(dfanout, "$(P)Mono_STOP") {
  field(VAL, "1")
  field(OUTA, "$(P)$(MTH).STOP PP MS")
  field(OUTB, "$(P)MSLD_STOP.A PP MS")
}

record(calcout, "$(P)MSLD_STOP") {
  field(DESC, "z2 stop logic ")
  field(DISV, "0")
  field(SDIS, "$(P)Mono_Mode.VAL")
  field(CALC, "A")
  field(OUT, "$(P)$(MSLD).STOP PP MS")
}

record(calcout, "$(P)Mono_DMOV") {
  field(DESC, "mono dmov logic")
  field(CALC, "A&(!C| B)")
  field(INPA, "$(P)$(MTH).DMOV CP NMS")
  field(INPB, "$(P)$(MSLD).DMOV CP NMS")
  field(INPC, "$(P)Mono_Mode.VAL CP NMS")
}

#! Further lines contain data used by VisualDCT
#! View(0,321,1.0)
#! Record("$(P)EnCalc",20,20,0,0,"$(P)EnCalc")
#! Field("$(P)EnCalc.INPA",16777215,1,"$(P)EnCalc.INPA")
#! Field("$(P)EnCalc.INPD",16777215,1,"$(P)EnCalc.INPD")
#! Link("$(P)EnCalc.INPD","$(P)LatticeD.VAL")
#! Field("$(P)EnCalc.INPB",16777215,1,"$(P)EnCalc.INPB")
#! Link("$(P)EnCalc.INPB","$(P)E2P.C")
#! Record("$(P)LambdaCalc",1337,419,0,0,"$(P)LambdaCalc")
#! Field("$(P)LambdaCalc.INPA",16777215,1,"$(P)LambdaCalc.INPA")
#! Field("$(P)LambdaCalc.INPD",16777215,0,"$(P)LambdaCalc.INPD")
#! Link("$(P)LambdaCalc.INPD","$(P)LatticeD.VAL")
#! Record("$(P)SlideCalc",260,20,0,0,"$(P)SlideCalc")
#! Field("$(P)SlideCalc.INPA",16777215,1,"$(P)SlideCalc.INPA")
#! Field("$(P)SlideCalc.INPB",16777215,1,"$(P)SlideCalc.INPB")
#! Link("$(P)SlideCalc.INPB","$(P)Offset.VAL")
#! Record("$(P)E2P",721,687,0,0,"$(P)E2P")
#! Field("$(P)E2P.INPE",16777215,1,"$(P)E2P.INPE")
#! Link("$(P)E2P.INPE","$(P)LatticeD.VAL")
#! Field("$(P)E2P.INPF",16777215,1,"$(P)E2P.INPF")
#! Link("$(P)E2P.INPF","$(P)Offset.VAL")
#! Field("$(P)E2P.INPC",16777215,1,"$(P)E2P.INPC")
#! Field("$(P)E2P.C",16777215,1,"$(P)E2P.C")
#! Record("$(P)LatticeTypeMO",1123,234,0,1,"$(P)LatticeTypeMO")
#! Field("$(P)LatticeTypeMO.FLNK",16777215,0,"$(P)LatticeTypeMO.FLNK")
#! Link("$(P)LatticeTypeMO.FLNK","$(P)LatticeTypeSeq")
#! Field("$(P)LatticeTypeMO.RVAL",16777215,0,"$(P)LatticeTypeMO.RVAL")
#! Record("$(P)LatticeTypeSeq",500,20,0,1,"$(P)LatticeTypeSeq")
#! Field("$(P)LatticeTypeSeq.SELL",16777215,1,"$(P)LatticeTypeSeq.SELL")
#! Link("$(P)LatticeTypeSeq.SELL","$(P)LatticeTypeMO.RVAL")
#! Field("$(P)LatticeTypeSeq.LNK1",16777215,1,"$(P)LatticeTypeSeq.LNK1")
#! Link("$(P)LatticeTypeSeq.LNK1","$(P)LatticeD.VAL")
#! Field("$(P)LatticeTypeSeq.LNK2",16777215,1,"$(P)LatticeTypeSeq.LNK2")
#! Link("$(P)LatticeTypeSeq.LNK2","$(P)LatticeD.VAL")
#! Field("$(P)LatticeTypeSeq.LNK3",16777215,1,"$(P)LatticeTypeSeq.LNK3")
#! Link("$(P)LatticeTypeSeq.LNK3","$(P)LatticeD.VAL")
#! Field("$(P)LatticeTypeSeq.LNK4",16777215,1,"$(P)LatticeTypeSeq.LNK4")
#! Link("$(P)LatticeTypeSeq.LNK4","$(P)LatticeD.VAL")
#! Record("$(P)LatticeD",740,20,0,1,"$(P)LatticeD")
#! Field("$(P)LatticeD.VAL",16777215,1,"$(P)LatticeD.VAL")
#! Record("$(P)Offset",980,20,0,1,"$(P)Offset")
#! Field("$(P)Offset.VAL",16777215,1,"$(P)Offset.VAL")
#! Record("$(P)Mono_Mode",647,1129,0,1,"$(P)Mono_Mode")
#! Field("$(P)Mono_Mode.VAL",16777215,0,"$(P)Mono_Mode.VAL")
#! Record("$(P)slide_driveValue",383,1139,0,1,"$(P)slide_driveValue")
#! Field("$(P)slide_driveValue.SDIS",16777215,1,"$(P)slide_driveValue.SDIS")
#! Link("$(P)slide_driveValue.SDIS","$(P)Mono_Mode.VAL")
#! Field("$(P)slide_driveValue.VAL",16777215,1,"$(P)slide_driveValue.VAL")
#! Field("$(P)slide_driveValue.OUT",16777215,1,"$(P)slide_driveValue.OUT")
#! Record("$(P)Mono_UseMode",712,1404,0,1,"$(P)Mono_UseMode")
#! Field("$(P)Mono_UseMode.OUT",16777215,0,"$(P)Mono_UseMode.OUT")
#! Link("$(P)Mono_UseMode.OUT","$(P)Mono_UseModeFanout.VAL")
#! Record("$(P)Mono_UseModeFanout",429,1410,0,1,"$(P)Mono_UseModeFanout")
#! Field("$(P)Mono_UseModeFanout.OUTA",16777215,1,"$(P)Mono_UseModeFanout.OUTA")
#! Field("$(P)Mono_UseModeFanout.OUTB",16777215,1,"$(P)Mono_UseModeFanout.OUTB")
#! Field("$(P)Mono_UseModeFanout.VAL",16777215,1,"$(P)Mono_UseModeFanout.VAL")
#! Record("$(P)E2P_LM",246,346,0,1,"$(P)E2P_LM")
#! Field("$(P)E2P_LM.INPA",16777215,1,"$(P)E2P_LM.INPA")
#! Link("$(P)E2P_LM.INPA","$(P)LatticeD.VAL")
#! Field("$(P)E2P_LM.INPB",16777215,1,"$(P)E2P_LM.INPB")
#! Link("$(P)E2P_LM.INPB","$(P)Offset.VAL")
#! Field("$(P)E2P_LM.INPC",16777215,1,"$(P)E2P_LM.INPC")
#! Link("$(P)E2P_LM.INPC","$(P)E2P.C")
#! Field("$(P)E2P_LM.INPD",16777215,1,"$(P)E2P_LM.INPD")
#! Field("$(P)E2P_LM.INPE",16777215,1,"$(P)E2P_LM.INPE")
#! Field("$(P)E2P_LM.INPF",16777215,1,"$(P)E2P_LM.INPF")
#! Field("$(P)E2P_LM.INPG",16777215,1,"$(P)E2P_LM.INPG")
#! Field("$(P)E2P_LM.INPH",16777215,1,"$(P)E2P_LM.INPH")
#! Field("$(P)E2P_LM.L",16777215,1,"$(P)E2P_LM.L")
#! Field("$(P)E2P_LM.P",16777215,1,"$(P)E2P_LM.P")
#! Record("$(P)E2P_driveT1",114,1149,0,0,"$(P)E2P_driveT1")
#! Field("$(P)E2P_driveT1.INPE",16777215,1,"$(P)E2P_driveT1.INPE")
#! Link("$(P)E2P_driveT1.INPE","$(P)LatticeD.VAL")
#! Field("$(P)E2P_driveT1.INPF",16777215,1,"$(P)E2P_driveT1.INPF")
#! Link("$(P)E2P_driveT1.INPF","$(P)Offset.VAL")
#! Field("$(P)E2P_driveT1.A",16777215,1,"$(P)E2P_driveT1.A")
#! Field("$(P)E2P_driveT1.OUTG",16777215,1,"$(P)E2P_driveT1.OUTG")
#! Field("$(P)E2P_driveT1.OUTH",16777215,1,"$(P)E2P_driveT1.OUTH")
#! Link("$(P)E2P_driveT1.OUTH","$(P)slide_driveValue.VAL")
#! Field("$(P)E2P_driveT1.INPC",16777215,1,"$(P)E2P_driveT1.INPC")
#! Link("$(P)E2P_driveT1.INPC","$(P)E2P.C")
#! Record("$(P)E2P_driveValue",1023,814,0,1,"$(P)E2P_driveValue")
#! Field("$(P)E2P_driveValue.INPC",16777215,0,"$(P)E2P_driveValue.INPC")
#! Link("$(P)E2P_driveValue.INPC","$(P)E2P.C")
#! Field("$(P)E2P_driveValue.INPD",16777215,0,"$(P)E2P_driveValue.INPD")
#! Link("$(P)E2P_driveValue.INPD","$(P)E2P_LM.L")
#! Field("$(P)E2P_driveValue.INPE",16777215,0,"$(P)E2P_driveValue.INPE")
#! Link("$(P)E2P_driveValue.INPE","$(P)E2P_LM.P")
#! Field("$(P)E2P_driveValue.A",16777215,0,"$(P)E2P_driveValue.A")
#! Field("$(P)E2P_driveValue.OUTF",16777215,0,"$(P)E2P_driveValue.OUTF")
#! Link("$(P)E2P_driveValue.OUTF","$(P)E2P_driveValue.A")
#! Field("$(P)E2P_driveValue.B",16777215,0,"$(P)E2P_driveValue.B")
#! Field("$(P)E2P_driveValue.OUTG",16777215,0,"$(P)E2P_driveValue.OUTG")
#! Link("$(P)E2P_driveValue.OUTG","$(P)E2P_driveValue.B")
#! Field("$(P)E2P_driveValue.OUTH",16777215,0,"$(P)E2P_driveValue.OUTH")
#! Link("$(P)E2P_driveValue.OUTH","$(P)E2P_driveT1.A")
